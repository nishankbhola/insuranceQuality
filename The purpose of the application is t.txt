Cursor Agent Context

This is a quality control web application for reviewing insurance quotes.

The goal of this app is to check whether the broker has properly created the quote by comparing it with actual MVR and Dash data.

Documents Uploaded Per Case

1 quote PDF (created manually by broker)

1 MVR report per driver

1 Dash report per driver

Example: If a policy has 3 drivers → expect 7 documents
(1 quote + 3 MVRs + 3 Dash reports)

Extractors Used

quote_extractor.py → pulls info from quote PDF

mvr_extractor.py → pulls info from MVR report

dash_extractor.py → pulls info from Dash report

MVR Report Contains

Full name

Driver's Licence Number (DLN)

Birth date

Issue date

Expiry date

Licence class (e.g. G, G2)

Address

Convictions (e.g. speeding)

MVR does not contain insurance history or claims.

Dash Report Contains

Insurance policy history

Claim history

First-party driver info

At-fault percentages

Cancellation and expiry reasons

Dash does not contain convictions.

Quote Contains

Driver info (name, DLN, birthdate)

Licence dates (G1, G2, G)

Convictions and claims (declared by broker)

date_insured (when driver first got insurance)

Vehicle and coverage details

Validation Rules – MVR

Match driver using full name + DLN

Normalize MVR date format: dd/mm/yyyy

If birth date and expiry date have same day/month:

G1 = issue date

G2 = G1 + 1 year

G = G2 + 1 year

If birth date and expiry date do not match:

G1 = expiry date - 5 years

G2 = G1 + 1 year

G = G2 + 1 year

Compare G1, G2, G with those listed in quote

If licence class is G2 → skip G date comparison

Check if any convictions in MVR are declared in quote

If any conviction is missing → mark as critical fail

Validation Rules – Dash

Normalize Dash date format: yyyy/mm/dd

Find first insurance policy ever held

Compare its start date with date_insured in quote

If mismatch → fail

Check for gaps between policy end and next policy start

If gap exists → report it and include reason (e.g. cancelled by insured)

For claims:

If at-fault > 0 and driver matches:

Check if claim is declared in quote

If missing → critical fail

If at-fault = 0 → skip

Validation Rules – Quote

Normalize quote date format: mm/dd/yyyy

Match each driver to corresponding MVR and Dash

Compare all extracted data against what is declared

Any missing info = fail

Any missing conviction or at-fault claim = critical fail

Frontend Output

Show results per driver

Separate MVR and Dash sections

Labels: Pass / Warning / Critical Fail

Show reasons for each failure

Show match percentage (0–100%)

Allow professional PDF report download

Example – Yang Palmo

DLN: P0311-78928-76026

Birthdate: 26/10/1987

MVR issue date: 06/03/2008

MVR expiry date: 26/10/2029

Licence class: G

Licence progression (calculated from MVR):

G1 = 06/03/2008

G2 = 06/03/2009

G = 06/03/2010

From quote:

G1 = 03/06/2008 → close match

G2 = 05/05/2009 → incorrect

G = 10/04/2010 → incorrect

MVR conviction:

Speeding on 06/08/2024

Not declared in quote → critical fail

Dash insurance history:

First policy started: 2015-09-04

Quote says date_insured: 09/04/2010 → mismatch → fail

Dash gap detected:

Policy ended: 2025-01-11

Next policy started: 2025-05-23

Gap exists → must be flagged

Reason: Cancelled – insured’s request

Dash claims:

At-fault claim on 2024-12-08 involving Yang Palmo

Not disclosed in quote → critical fail

